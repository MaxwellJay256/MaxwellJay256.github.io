<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>STM32 on Keine Studio</title>
        <link>https://keinestudio.cn/tags/stm32/</link>
        <description>Recent content in STM32 on Keine Studio</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>MaxwellJay256</copyright>
        <lastBuildDate>Wed, 26 Feb 2025 22:06:00 +0800</lastBuildDate><atom:link href="https://keinestudio.cn/tags/stm32/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>STM32G474 å®šæ—¶å™¨è§¦å‘ DMA é«˜é€Ÿç¿»è½¬ GPIO</title>
        <link>https://keinestudio.cn/posts/stm32g474-dma/</link>
        <pubDate>Wed, 26 Feb 2025 22:06:00 +0800</pubDate>
        
        <guid>https://keinestudio.cn/posts/stm32g474-dma/</guid>
        <description>&lt;img src="https://keinestudio.cn/posts/stm32g474-dma/osc-gpio.jpg" alt="Featured image of post STM32G474 å®šæ—¶å™¨è§¦å‘ DMA é«˜é€Ÿç¿»è½¬ GPIO" /&gt;&lt;p&gt;æœ¬æ–‡æ˜¯å¯¹ &lt;a class=&#34;link&#34; href=&#34;https://www.analog.com/cn/products/max14808.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MAX14808&lt;/a&gt;
è¿›è¡Œé©±åŠ¨æµ‹è¯•æ—¶ STM32G474 å®šæ—¶å™¨è§¦å‘ DMA é«˜é€Ÿç¿»è½¬ GPIO çš„å®ç°è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¡¬ä»¶å‡†å¤‡&#34;&gt;ç¡¬ä»¶å‡†å¤‡
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;MAX14808 Evaluation Board v1.0&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.st.com.cn/zh/microcontrollers-microprocessors/stm32g474ve.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;STM32G474VET6&lt;/a&gt; å¼€å‘æ¿
&lt;ul&gt;
&lt;li&gt;STM32G474 çš„æœ€é«˜æ—¶é’Ÿé¢‘ç‡ä¸º 170 MHzï¼ŒVET6 ä¸º LQFP-100 å°è£…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.st.com.cn/zh/development-tools/stlink-v3minie.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;STLINK-V3-MINIE&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç¤ºæ³¢å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è½¯ä»¶å‡†å¤‡&#34;&gt;è½¯ä»¶å‡†å¤‡
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;STM32CubeMXï¼Œå›ºä»¶ç‰ˆæœ¬ä¸º STM32Cube_FW_G4_V1.6.1&lt;/li&gt;
&lt;li&gt;Visual Studio Code&lt;/li&gt;
&lt;li&gt;CMakeï¼ˆæˆ‘ä»æ¥ä¸ç”¨ Keilï¼ŒCubeIDE ä¹Ÿç”¨ä¸ä¹ æƒ¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†è®© MAX14808 è¾“å‡ºå®éªŒè¦æ±‚çš„é«˜å‹è„‰å†²ï¼Œéœ€è¦ä»¥ä¸€å®šçš„æ—¶åºå‘æ¯ä¸ªé€šé“çš„ INN, INP å¼•è„šè¾“å…¥é€»è¾‘ä¿¡å·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/waveform.jpg&#34;
	width=&#34;1752&#34;
	height=&#34;1077&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/waveform_hu_61f83d86b1bfd452.jpg 480w, https://keinestudio.cn/posts/stm32g474-dma/waveform_hu_b195565cb20d8bb6.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ç›®æ ‡æ³¢å½¢ç¤ºæ„å›¾&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;162&#34;
		data-flex-basis=&#34;390px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¾“å‡ºé«˜å‹è„‰å†²æ—¶ï¼ŒINN, INP éœ€è¦ä»¥ 10 MHz çš„é¢‘ç‡ç¿»è½¬ã€‚STM32 çš„ HAL åº“ GPIO æ“ä½œæ˜¯åšä¸åˆ°çš„ï¼Œéœ€è¦ç”¨åˆ° DMAã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ä¸Šå…³äº DMA ç¿»è½¬ GPIO çš„æ–¹æ³•å¹¶éæ²¡æœ‰ï¼Œä½†ä¸»è¦éƒ½æ˜¯æµ‹è¯• STM32 ç¿»è½¬ GPIO çš„æé™é€Ÿåº¦ï¼Œåƒæœ¬æ–‡ä¸­è¿™ç§è¾“å‡ºç‰¹å®šé¢‘ç‡è„‰å†²çš„åšæ–‡åœ¨æˆ‘å†™è¿™ä»½ç¬”è®°å‰è¿˜æ²¡çœ‹åˆ°è¿‡ï¼ˆä¹‹å‰ç”¨ NUCLEO-U575ZI æµ‹è¯• MAX14808 æ—¶å‚è€ƒäº†
&lt;a class=&#34;link&#34; href=&#34;https://community.st.com/t5/stm32-mcus-products/stm32u5-triggering-dma-request-from-timer-to-write-to-gpiod-odr/td-p/755881&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Solved: STM32U5 Triggering DMA request from timer to write to GPIOD ODR register&lt;/a&gt;ï¼Œä½† STM32U5 çš„ GPDMA ä¸å…¶ä»–ç³»åˆ—çš„ç”¨æ³•åŒºåˆ«å¤ªå¤§äº†ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æŠ˜è…¾äº†å‡ å¤©åæå‡ºæ¥ä»¥ä¸‹ç»“æœã€‚&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®-cubemx&#34;&gt;é…ç½® CubeMX
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å°† 8 ä¸ªé€šé“çš„ 16 ä¸ª IO é…ç½®åœ¨ STM32G474 çš„ GPIOE0~E15 ä¸Šï¼Œè¿™æ ·å‘ &lt;code&gt;GPIOE-&amp;gt;ODR&lt;/code&gt; å†™å…¥ä¸€ä¸ª 16 ä½äºŒè¿›åˆ¶æ•°ä¾¿å¯åŒæ—¶æ“ä½œ 16 ä¸ªå¼•è„šè¾“å‡ºé«˜ / ä½ç”µå¹³ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/gpio.png&#34;
	width=&#34;2561&#34;
	height=&#34;1368&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/gpio_hu_c036b37fec184f65.png 480w, https://keinestudio.cn/posts/stm32g474-dma/gpio_hu_8238ed4fb7b076e7.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;æˆ‘æŠŠ ADCã€SPIã€OPAMP ä¹‹ç±»çš„å¼•è„šéƒ½é¢„ç•™äº†ï¼Œåªæ˜¯ä¸ç”Ÿæˆå¯¹åº”ä¸»å‡½æ•°ä»£ç &#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;é…ç½® TIM2 ç”¨æ¥ç”Ÿæˆ 10 MHz è„‰å†²ã€‚MCU ä¸»é¢‘å…ˆæ‹‰åˆ°æœ€å¤§ 170 MHzï¼ŒTIM2 ä¸é¢„åˆ†é¢‘ï¼Œè®¡æ•°å‘¨æœŸä¸º 17 - 1ï¼Œè¿™æ ·ç”Ÿæˆçš„è„‰å†²å°±æ˜¯ 10 MHzã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/tim2.png&#34;
	width=&#34;2561&#34;
	height=&#34;1368&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/tim2_hu_fc070ca1b0ef8643.png 480w, https://keinestudio.cn/posts/stm32g474-dma/tim2_hu_c351d9708b436b9b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;TIM2 é…ç½®&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;ä»¥ &lt;code&gt;TIM2_UP&lt;/code&gt; ä¸ºäº‹ä»¶ç”Ÿæˆ DMA è¯·æ±‚ï¼ˆç½‘ä¸Šçš„æ–‡ç« è¿™é‡Œéƒ½ç”¨ MemToMem çš„ DMA è¯·æ±‚ï¼Œä½† MemToMem çš„ DMA çªå‘ä¼ è¾“é€Ÿåº¦ç”± AHB æ—¶é’Ÿé¢‘ç‡å†³å®šï¼Œä¸èƒ½ç›´æ¥æ§åˆ¶ï¼‰ã€‚æ¨¡å¼é€‰ Normal è€Œä¸æ˜¯ Circularï¼ŒåŸå› åé¢è¯´ã€‚æ–¹å‘å½“ç„¶æ˜¯ Memory to Peripheralï¼Œæ•°æ®å®½åº¦é€‰ Half Wordï¼ˆSTM32 æ˜¯ 32 ä½å¤„ç†å™¨å˜›ï¼Œä¸€ä¸ªå­—æ˜¯ 32 ä½ï¼ŒåŠä¸ªå­—å°±æ˜¯ 16 ä½ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/dma.png&#34;
	width=&#34;2561&#34;
	height=&#34;1368&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/dma_hu_89b762c941a53793.png 480w, https://keinestudio.cn/posts/stm32g474-dma/dma_hu_7de9df1d25030206.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;DMA é…ç½®&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢æˆ‘åªæåˆ°äº†ä»¥ 10 MHz ç¿»è½¬ GPIOï¼Œä½†è¿™ä¸ªæ“ä½œæ¯ 50 ms æ‰è¿›è¡Œä¸€æ¬¡ã€‚å‡å¦‚æˆ‘ç”¨ DMA Circularï¼Œå°†æ³¢å½¢å›¾çš„çº¢çº¿å’Œç»¿çº¿éƒ¨åˆ†éƒ½æ‰”è¿› DMA æ¬è¿ï¼Œé‚£ä¹ˆæ³¢å½¢æ•°ç»„å†…å°†ä¼šæœ‰ $50 \times 10^{-3} \cdot 10\times 10^6 = 5 \times 10^5$ ä¸ªæ•°ï¼Œå†…å­˜ä¼°è®¡çˆ†äº†ğŸ¤£ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬åªèƒ½è®© DMA ç”±å¦ä¸€ä¸ªå‘¨æœŸä¸º 50 ms çš„æ—¶é’Ÿè§¦å‘ï¼Œæ¯æ¬¡è§¦å‘åªæ¬è¿è„‰å†²å’Œä¸¤æ¡çº¢çº¿çš„éƒ¨åˆ†ï¼Œæ¬å®Œå°±åœï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡è¢« â€œå”¤é†’â€ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦æŠŠ DMA é…ç½®ä¸º Normalã€‚&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;é…ç½®å¦ä¸€ä¸ªæ—¶é’Ÿ TIM5ï¼ˆTIM2 å’Œ TIM5 æ˜¯ STM32G474 ä¸­çš„ä¸¤ä¸ª 32 ä½é€šç”¨å®šæ—¶å™¨ï¼Œç”¨å®ƒä»¬è®¡æ—¶æ›´ç²¾å‡†ï¼Œæˆ‘çŒœï¼‰ï¼Œé¢„åˆ†é¢‘ 1000 - 1ï¼Œè®¡æ•°å‘¨æœŸ 8500 - 1ï¼Œè¿™æ ·æ—¶é’Ÿé¢‘ç‡å°±æ˜¯ 20 Hzã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/tim5.png&#34;
	width=&#34;2561&#34;
	height=&#34;1368&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/tim5_hu_c4fe5a143c0d33b0.png 480w, https://keinestudio.cn/posts/stm32g474-dma/tim5_hu_a03bdc8e3721d93c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;TIM5 é…ç½®&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;å¼€å¯ TIM5 çš„å…¨å±€ä¸­æ–­ã€‚æˆ‘ä¼šåœ¨ TIM5 çš„ä¸­æ–­ä¸­æ‰§è¡Œ DMA ä¼ è¾“ã€‚ç”±äº DMA ç”±ç¡¬ä»¶æ‰§è¡Œè€Œä¸ç»è¿‡ CPUï¼Œæ‰€ä»¥ä¸­æ–­å‡½æ•°çš„è¿è¡Œé€Ÿåº¦å¾ˆå¿«ã€‚&lt;/li&gt;
&lt;li&gt;å†è®°å½•ä¸€ä¸‹æ—¶é’Ÿæ ‘çš„é…ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/clock.png&#34;
	width=&#34;2561&#34;
	height=&#34;1368&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/clock_hu_4fad9e591fccf7f9.png 480w, https://keinestudio.cn/posts/stm32g474-dma/clock_hu_523e5b5a8875c872.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;æ—¶é’Ÿæ ‘&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;CubeMX å…¶ä½™çš„éƒ¨åˆ†ä¸é‡è¦ï¼Œå°±ä¸æ”¾å‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç 
&lt;/h2&gt;&lt;p&gt;åªæ˜¯æ“ä½œ GPIOï¼Œä»£ç å¹¶ä¸é•¿ã€‚å…¶å®åªæœ‰ &lt;code&gt;main.c&lt;/code&gt; çš„å‡ ä¸ªç‰‡æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è„‰å†²æ³¢å½¢æ•°ç»„ï¼Œ&lt;code&gt;PULSE_OFF&lt;/code&gt; å¯¹åº”å…³æ–­ã€&lt;code&gt;PULSE_RECEIVE&lt;/code&gt; å¯¹åº”æ‰“å¼€ T/R å¼€å…³æ¥æ”¶å›æ³¢ã€‚æ ¹æ®å‰æ–‡æ€è·¯ï¼Œæˆ‘åªéœ€è¦åœ¨æ³¢å½¢æ•°ç»„çš„æœ€åä¸€ä½å¡« &lt;code&gt;PULSE_RECEIVE&lt;/code&gt;ï¼Œåˆ™ä¼ è¾“ç»“æŸåçš„å‰©ä½™æ—¶é—´é‡Œ MAX14808 éƒ½å¤„äºæ¥æ”¶çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* Private macro -------------------------------------------------------------*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PM */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PULSE_OFF 0x0000
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PULSE_VPP 0xAAAA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PULSE_VNN 0x5555
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PULSE_RECEIVE 0xFFFF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PM */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* Private variables ---------------------------------------------------------*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pulse_wave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_VPP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_VNN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_VPP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_VNN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PULSE_OFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;PULSE_RECEIVE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DMA_HandleTypeDef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hdma_tim2_up&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;åœ¨ &lt;code&gt;main&lt;/code&gt; å‡½æ•°é‡Œå¯åŠ¨ TIM5ã€‚&lt;code&gt;MAX14808_Init&lt;/code&gt; å’Œ &lt;code&gt;MAX14808_SetMode&lt;/code&gt; æ˜¯æˆ‘è‡ªå®šä¹‰çš„ä¸¤ä¸ªå‡½æ•°ï¼Œä¸»è¦æ˜¯å¯¹ &lt;code&gt;MODE0&lt;/code&gt; å’Œ &lt;code&gt;MODE1&lt;/code&gt; ä¸¤ä¸ªå¼•è„šæ“ä½œï¼Œæ§åˆ¶ MAX14808 çš„æ•´ä½“å·¥ä½œçŠ¶æ€ï¼Œè¿™é‡Œç•¥è¿‡ä¸æã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;MAX14808_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;MAX14808_SetMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX14808_MODE_OCTAL_THREE_LEVEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_TIM_Base_Start_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;ç¼–è¾‘ TIM5 çš„ä¸­æ–­å›è°ƒå‡½æ•°ï¼Œè¿™é‡Œå°‘ä¸€è¡Œä»£ç éƒ½ä¸è¡Œã€‚ä¸ºäº†è®© DMA èƒ½å¤Ÿé‡å¤è§¦å‘ï¼Œä½ å¿…é¡»ï¼š
å…³é—­ DMAï¼›åœæ­¢å¹¶é‡ç½® TIM2ï¼›æ¸…é™¤ DMA çŠ¶æ€ï¼›å¯åŠ¨ DMAï¼›å¯åŠ¨ TIM2ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_TIM_PeriodElapsedCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TIM_HandleTypeDef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN Callback 0 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Instance&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;__HAL_TIM_DISABLE_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM_DMA_UPDATE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_TIM_Base_Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;__HAL_TIM_SET_COUNTER&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_DMA_Abort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdma_tim2_up&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_DMA_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdma_tim2_up&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pulse_wave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PULSE_GPIO_Port&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ODR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pulse_wave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pulse_wave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;__HAL_TIM_ENABLE_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM_DMA_UPDATE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_TIM_Base_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END Callback 0 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å®éªŒ&#34;&gt;å®éªŒ
&lt;/h2&gt;&lt;p&gt;ç”¨ç¤ºæ³¢å™¨è§‚å¯Ÿå•ä¸ªé€šé“çš„ INN å’Œ INP å¼•è„šï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/osc-gpio.jpg&#34;
	width=&#34;3625&#34;
	height=&#34;2090&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/osc-gpio_hu_3d9d0dbe22c6c643.jpg 480w, https://keinestudio.cn/posts/stm32g474-dma/osc-gpio_hu_bc8ae68c9d242693.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;å•ä¸ªé€šé“çš„ INN å’Œ INP å¼•è„šå±€éƒ¨æ³¢å½¢&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;173&#34;
		data-flex-basis=&#34;416px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;æ³¢å½¢å¤±çœŸæ¯”è¾ƒä¸¥é‡ï¼Œæˆ‘ä»¬çŒœæµ‹åŸå› æ˜¯ä¿¡å·é¢‘ç‡é«˜ã€ç¤ºæ³¢å™¨æ¢å¤´çº¿å¤ªé•¿ã€ä¿¡å·é€šè¿‡æœé‚¦çº¿è¿æ¥å‡ºç°å¤šæ¬¡åå°„ç­‰ã€‚ä½†é¢‘ç‡ã€ç›¸ä½éƒ½æ˜¯å¾ˆç²¾å‡†çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ MAX14808 è¾“å‡ºç«¯ç©ºè½½è§‚å¯Ÿåˆ°çš„æ³¢å½¢ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/osc-out-1.jpg&#34;
	width=&#34;3128&#34;
	height=&#34;1793&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/osc-out-1_hu_2fc1938226efbaba.jpg 480w, https://keinestudio.cn/posts/stm32g474-dma/osc-out-1_hu_490f87851e04c4d.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;MAX14808 è¾“å‡ºç«¯å±€éƒ¨æ³¢å½¢&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;174&#34;
		data-flex-basis=&#34;418px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://keinestudio.cn/posts/stm32g474-dma/osc-out-2.jpg&#34;
	width=&#34;3070&#34;
	height=&#34;1769&#34;
	srcset=&#34;https://keinestudio.cn/posts/stm32g474-dma/osc-out-2_hu_c415ac2858e47354.jpg 480w, https://keinestudio.cn/posts/stm32g474-dma/osc-out-2_hu_15c7ead0a1ed6f26.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;MAX14808 è¾“å‡ºç«¯æ¨ªè½´ç¼©æ”¾åæ³¢å½¢&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;173&#34;
		data-flex-basis=&#34;416px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè„‰å†²å±€éƒ¨æ³¢å½¢å°±æ›´ä¸‘äº†ï¼Œä¼°è®¡ä¹Ÿæ˜¯å’Œç”µè·¯è¿æ¥æ–¹å¼æœ‰å…³ã€‚è¿™äº›æ²¡åŠæ³•é å†™ä»£ç è§£å†³ï¼Œåªèƒ½ç­‰åé¢ç¡¬ä»¶æ–¹æ¡ˆæ”¹ç‰ˆå†æµ‹è¯•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å°ç»“&#34;&gt;å°ç»“
&lt;/h2&gt;&lt;p&gt;ç”±äºä¹‹å‰æ²¡æœ‰ç³»ç»Ÿçš„ STM32 è½¯ä»¶å¼€å‘ç»éªŒï¼Œè¿™æ¬¡ MAX14808 çš„é©±åŠ¨å®éªŒæˆ‘ç»•äº†å¾ˆå¤šå¼¯è·¯ï¼Œç”šè‡³çƒ§æ‰äº†æˆ‘çš„ NUCLEO-U575ZI å¼€å‘æ¿ğŸ˜µã€‚ä½†å¥½åœ¨æˆ‘æœ€åæ‰¾åˆ°äº†ä¸€ä¸ªåˆæ ¼çš„æ§åˆ¶æ–¹æ¡ˆï¼Œå¹¶ä¸”å®éªŒæå¤§åœ°åŠ æ·±äº†æˆ‘å¯¹ STM32 MCU çš„æ—¶é’Ÿå’Œ DMA çš„ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢é»„å­¦é•¿çš„ç¬”è®°ç»™æˆ‘çš„å¯å‘ä»¥åŠæ›¹å­¦é•¿çš„æ”¯æŒã€‚&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
